webpackJsonp([30],{"1iSO":function(e,a){},DFSz:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"parent"},[t("div",{staticClass:"bg"},[t("p",{staticClass:"grid-content"},[e._v("微信公众配置")]),e._v(" "),t("p",[e._v("\n      公众号名称：\n    "),t("el-input",{staticClass:"el-input",attrs:{type:"text",autoComplete:"off",placeholder:""},model:{value:e.para.MpName,callback:function(a){e.$set(e.para,"MpName",a)},expression:"para.MpName"}}),e._v(" "),t("span",{staticStyle:{color:"#e33c32"}},[e._v("*")])],1),e._v(" "),t("p",[e._v("\n      公 众 号 ID：\n      "),t("el-input",{staticClass:"el-input",attrs:{type:"text",autoComplete:"off",placeholder:""},model:{value:e.para.MpAppID,callback:function(a){e.$set(e.para,"MpAppID",a)},expression:"para.MpAppID"}}),e._v(" "),t("span",{staticStyle:{color:"#e33c32"}},[e._v("*")])],1),e._v(" "),t("p",[e._v("\n      AppSecret：\n      "),t("el-input",{staticClass:"el-input",attrs:{type:"text",autoComplete:"off",placeholder:""},model:{value:e.para.MpAppSecret,callback:function(a){e.$set(e.para,"MpAppSecret",a)},expression:"para.MpAppSecret"}}),e._v(" "),t("span",{staticStyle:{color:"#e33c32"}},[e._v("*")])],1)]),e._v(" "),t("div",{staticClass:"bg"},[t("p",{staticClass:"grid-content"},[e._v("微信收款帐号配置")]),e._v(" "),t("p",[e._v("\n      商户号：\n      "),t("el-input",{staticClass:"el-input",attrs:{type:"text",autoComplete:"off",placeholder:""},model:{value:e.para.MCHID,callback:function(a){e.$set(e.para,"MCHID",a)},expression:"para.MCHID"}}),e._v(" "),t("span",{staticStyle:{color:"#e33c32"}},[e._v("*")])],1),e._v(" "),t("p",[e._v("\n      支付密钥：\n      "),t("el-input",{staticClass:"el-input",attrs:{type:"text",autoComplete:"off",placeholder:""},model:{value:e.para.PayKEY,callback:function(a){e.$set(e.para,"PayKEY",a)},expression:"para.PayKEY"}}),e._v(" "),t("span",{staticStyle:{color:"#e33c32"}},[e._v("*")])],1)]),e._v(" "),t("div",{staticClass:"bg"},[t("p",{staticClass:"grid-content"},[e._v("选择该公众号下的门店")]),e._v(" "),e.isShow?t("el-checkbox",{on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(a){e.checkAll=a},expression:"checkAll"}},[e._v("全选")]):e._e(),e._v(" "),t("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),e._l(e.shops,function(a){return t("el-checkbox",{key:a.shopid,attrs:{label:a.shopid,disabled:a.disable},on:{change:e.handleCheckedCitiesChange},model:{value:a.check,callback:function(t){e.$set(a,"check",t)},expression:"item.check"}},[e._v(e._s(a.shopname))])})],2),e._v(" "),t("div",{staticStyle:{width:"260px",margin:"auto","white-space":"nowrap"}},[t("el-button",{staticClass:"el_save_btn",on:{click:e.clickConfirm}},[e._v("确定")]),e._v(" "),t("el-button",{staticClass:"el_cancel_btn",on:{click:e.clickCancel}},[e._v("取消")])],1)])},staticRenderFns:[]};var c=t("VU/8")({props:{id:{default:0}},data:function(){return{isShow:!0,shops:[],checkAll:!1,isIndeterminate:!1,loading:!0,para:{id:this.id,MpName:"",MpAppID:"",MpAppSecret:"",MCHID:"",PayKEY:"",ShopIDs:""}}},created:function(){this.update()},methods:{update:function(){this.loading=!0,this.getShops(),this.queryWeshopInfo()},handleCheckAllChange:function(e){this.checkAll?this.shops.forEach(function(e){e.disable||(e.check=!0)}):this.shops.forEach(function(e){e.check=!1})},handleCheckedCitiesChange:function(e){var a=0;this.shops.forEach(function(e){e.check||e.disable||a++}),this.checkAll=!(a>0)},clickConfirm:function(){var e=this;if(this.dataValidation()){var a=[];this.shops.forEach(function(e){e.check&&a.push(e.shopid+",")}),this.para.ShopIDs=a.join(","),this.$store.dispatch("queryChangeWxConfigInfo",this.para).then(function(a){e.$message({type:"success",message:"修改成功"}),e.$emit("close")}).catch(function(){})}},clickCancel:function(){this.$emit("close")},dataValidation:function(){return""===this.para.MpName?(this.$message.error("请输入公众号名称"),!1):""===this.para.MpAppID?(this.$message.error("请输入公众号ID"),!1):""===this.para.MpAppSecret?(this.$message.error("请输入AppSecret"),!1):""===this.para.MCHID?(this.$message.error("请输入商户号"),!1):""!==this.para.PayKEY||(this.$message.error("请输入支付密钥"),!1)},getShops:function(){var e=this;this.$store.dispatch("queryShops",{id:this.id}).then(function(a){e.shops=[],a.forEach(function(a){var t={};t.shopid=a.shopid,t.shopname=a.shopname,t.address=a.address,t.authtype=a.authtype,t.groupaccountid=a.groupaccountid,0!==e.id&&t.groupaccountid===e.id?t.check=!0:t.check=!1,0===t.groupaccountid||t.groupaccountid===e.id?t.disable=!1:t.disable=!0,e.shops.push(t)}),e.handleCheckedCitiesChange()}).catch(function(){})},queryWeshopInfo:function(){var e=this;this.$store.dispatch("queryWeshopInfo",{id:this.id,isshow:0}).then(function(a){e.para.id=a.account.ID,e.para.MpName=a.account.MpName,e.para.MpAppID=a.account.MpAppID,e.para.MpAppSecret=a.account.MpAppSecret,e.para.MCHID=a.pay.MCHID,e.para.PayKEY=a.pay.PayKEY,e.loading=!1}).catch(function(){})}}},s,!1,function(e){t("1iSO")},"data-v-4138f136",null);a.default=c.exports}});
//# sourceMappingURL=30.a1ee2ab0f07809db871a.js.map