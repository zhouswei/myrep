webpackJsonp([18],{cVGI:function(t,s){},vQZy:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=i("BO1k"),e=i.n(a),n=i("EYHf"),r=i("CnLx"),c={name:"enterpriseinfo",mixins:[i("W/0o").a],mounted:function(){this.isMobile()?this.disabled=!0:this.disabled=!1},created:function(){this.getSettingInfo()},props:{id:{default:0},address:{type:String,default:function(){return""}}},data:function(){return{cityOptions:n.a,citys:[],imgSrc:"",hind:!0,disabled:!1,para:{Title:"",Address:"",ProvinceID:"",CityID:"",AreaID:"",ShopID:this.id,Pic:""},fullAddress:""}},methods:{getSettingInfo:function(){var t=this;this.para.ShopID=this.id,this.$store.dispatch("querySettingInfo",{id:this.id}).then(function(s){t.para.Title=s.shopinfo.Title,t.para.Address=s.shopwx.Address,t.para.ProvinceID=s.shopwx.ProvinceID,t.para.CityID=s.shopwx.CityID,t.para.AreaID=s.shopwx.AreaID,t.imgSrc=Object(r.a)()+s.shopwx.Pic,t.para.Pic=s.shopwx.Pic,t.citys=[],t.citys.push(t.para.ProvinceID.toString()),t.citys.push(t.para.CityID.toString()),t.citys.push(t.para.AreaID.toString()),""===s.shopwx.Pic?t.hind=!0:t.hind=!1,t.getFullAddress()}).catch(function(){})},clickConfirm:function(){var t=this;3===this.citys.length?""!==this.para.Address?""!==this.para.Pic?this.$store.dispatch("querySettingWxConfigInfo",this.para).then(function(s){t.$message({type:"success",message:"保存成功"}),t.$emit("close")}).catch(function(){}):this.$message.error("请上传门头照"):this.$message.error("请输入详细地址"):this.$message.error("请选择完整的地址")},clickCancle:function(){this.$emit("close")},changeProvince:function(){this.para.ProvinceID=void 0!==this.citys[0]?this.citys[0]:"",this.para.CityID=void 0!==this.citys[1]?this.citys[1]:"",this.para.AreaID=void 0!==this.citys[2]?this.citys[2]:"",this.getFullAddress()},getFullAddress:function(){if(3===this.citys.length){var t=[];this.getCascaderObj(this.citys,this.cityOptions).forEach(function(s){t.push(s.label)}),this.fullAddress=t.join("")}},handleAvatarSuccess:function(t,s){var i=t.indexOf("Msg")+6,a=t.indexOf("}")-1,e=t.substring(i,a);this.para.Pic=e,this.imgSrc=URL.createObjectURL(s.raw),this.hind=!1},beforeAvatarUpload:function(t){var s=t.size/1024/1024<2;return s||this.$message.error("上传头像图片大小不能超过 2MB!"),s},clickAdress:function(){0!==this.para.ProvinceID&&0!==this.para.CityID&&0!==this.para.AreaID?this.$emit("clickOp",this.para.Address,this.fullAddress):this.$message.error("请先选择省市区")},setData:function(){this.para.Address=this.address},getCascaderObj:function(t,s){return t.map(function(t,i,a){var n=!0,r=!1,c=void 0;try{for(var o,l=e()(s);!(n=(o=l.next()).done);n=!0){var d=o.value;if(d.value===t)return s=d.children,d}}catch(t){r=!0,c=t}finally{try{!n&&l.return&&l.return()}finally{if(r)throw c}}return null})}}},o={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticStyle:{}},[i("p",{staticClass:"infoPerLine1"},[i("span",{staticClass:"infoShowName"},[t._v("\n      门店：\n    ")]),t._v("\n    "+t._s(t.para.Title)+"\n  ")]),t._v(" "),i("div",{staticClass:"infoPerLine"},[i("span",{staticClass:"infoShowName"},[t._v("\n        联系地址：\n    ")]),t._v(" "),i("el-cascader",{staticClass:"cascader",attrs:{options:t.cityOptions,"change-on-select":""},on:{change:t.changeProvince},model:{value:t.citys,callback:function(s){t.citys=s},expression:"citys"}}),t._v(" "),i("el-input",{staticClass:"address_input el-input",attrs:{type:"text",autocomplete:"off"},on:{focus:t.clickAdress},model:{value:t.para.Address,callback:function(s){t.$set(t.para,"Address",s)},expression:"para.Address"}}),t._v(" "),i("span",{staticStyle:{color:"#e33c32"}},[t._v("*")])],1),t._v(" "),i("p",{staticClass:"infoPerLine1"},[i("span",{staticClass:"infoShowName"},[t._v("连锁微店门头照片：")]),t._v(" "),i("span",{staticStyle:{color:"#e33c32"}},[t._v("*")]),t._v(" "),i("el-upload",{staticClass:"avatar-uploader",staticStyle:{"text-align":"center"},attrs:{disabled:t.disabled,action:"https://link.handnear.com/up/upload.aspx?t=chain_pic&r=/","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.hind?i("i",{staticClass:"el-icon-plus avatar-uploader-icon"}):i("img",{staticClass:"avatar",attrs:{src:t.imgSrc,onerror:"javascript:this.src='http://r.handnear.com/wechat/images/shopwxsrc.png'"}}),t._v(" "),t.hind?t._e():i("span",{staticStyle:{color:"#37bfc8"}},[i("u",[t._v("更换")])])])],1),t._v(" "),i("div",{staticStyle:{width:"260px",margin:"auto","white-space":"nowrap"}},[i("el-button",{staticClass:"save_btn",on:{click:t.clickConfirm}},[t._v("确定")]),t._v(" "),i("el-button",{staticClass:"el_cancel_btn",on:{click:t.clickCancle}},[t._v("取消")])],1)])},staticRenderFns:[]};var l=i("VU/8")(c,o,!1,function(t){i("cVGI")},"data-v-84fd756a",null);s.default=l.exports}});
//# sourceMappingURL=18.e882348007227f35082a.js.map