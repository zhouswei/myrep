webpackJsonp([2,18,24,30,41,42],{"1iSO":function(t,e){},CPxm:function(t,e){},Cozu:function(t,e){},DFSz:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"parent"},[a("div",{staticClass:"bg"},[a("p",{staticClass:"grid-content"},[t._v("微信公众配置")]),t._v(" "),a("p",[t._v("\n      公众号名称：\n    "),a("el-input",{staticClass:"el-input",attrs:{type:"text",autoComplete:"off",placeholder:""},model:{value:t.para.MpName,callback:function(e){t.$set(t.para,"MpName",e)},expression:"para.MpName"}}),t._v(" "),a("span",{staticStyle:{color:"#e33c32"}},[t._v("*")])],1),t._v(" "),a("p",[t._v("\n      公 众 号 ID：\n      "),a("el-input",{staticClass:"el-input",attrs:{type:"text",autoComplete:"off",placeholder:""},model:{value:t.para.MpAppID,callback:function(e){t.$set(t.para,"MpAppID",e)},expression:"para.MpAppID"}}),t._v(" "),a("span",{staticStyle:{color:"#e33c32"}},[t._v("*")])],1),t._v(" "),a("p",[t._v("\n      AppSecret：\n      "),a("el-input",{staticClass:"el-input",attrs:{type:"text",autoComplete:"off",placeholder:""},model:{value:t.para.MpAppSecret,callback:function(e){t.$set(t.para,"MpAppSecret",e)},expression:"para.MpAppSecret"}}),t._v(" "),a("span",{staticStyle:{color:"#e33c32"}},[t._v("*")])],1)]),t._v(" "),a("div",{staticClass:"bg"},[a("p",{staticClass:"grid-content"},[t._v("微信收款帐号配置")]),t._v(" "),a("p",[t._v("\n      商户号：\n      "),a("el-input",{staticClass:"el-input",attrs:{type:"text",autoComplete:"off",placeholder:""},model:{value:t.para.MCHID,callback:function(e){t.$set(t.para,"MCHID",e)},expression:"para.MCHID"}}),t._v(" "),a("span",{staticStyle:{color:"#e33c32"}},[t._v("*")])],1),t._v(" "),a("p",[t._v("\n      支付密钥：\n      "),a("el-input",{staticClass:"el-input",attrs:{type:"text",autoComplete:"off",placeholder:""},model:{value:t.para.PayKEY,callback:function(e){t.$set(t.para,"PayKEY",e)},expression:"para.PayKEY"}}),t._v(" "),a("span",{staticStyle:{color:"#e33c32"}},[t._v("*")])],1)]),t._v(" "),a("div",{staticClass:"bg"},[a("p",{staticClass:"grid-content"},[t._v("选择该公众号下的门店")]),t._v(" "),t.isShow?a("el-checkbox",{on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]):t._e(),t._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),t._v(" "),t._l(t.shops,function(e){return a("el-checkbox",{key:e.shopid,attrs:{label:e.shopid,disabled:e.disable},on:{change:t.handleCheckedCitiesChange},model:{value:e.check,callback:function(a){t.$set(e,"check",a)},expression:"item.check"}},[t._v(t._s(e.shopname))])})],2),t._v(" "),a("div",{staticStyle:{width:"260px",margin:"auto","white-space":"nowrap"}},[a("el-button",{staticClass:"el_save_btn",on:{click:t.clickConfirm}},[t._v("确定")]),t._v(" "),a("el-button",{staticClass:"el_cancel_btn",on:{click:t.clickCancel}},[t._v("取消")])],1)])},staticRenderFns:[]};var s=a("VU/8")({props:{id:{default:0}},data:function(){return{isShow:!0,shops:[],checkAll:!1,isIndeterminate:!1,loading:!0,para:{id:this.id,MpName:"",MpAppID:"",MpAppSecret:"",MCHID:"",PayKEY:"",ShopIDs:""}}},created:function(){this.update()},methods:{update:function(){this.loading=!0,this.getShops(),this.queryWeshopInfo()},handleCheckAllChange:function(t){this.checkAll?this.shops.forEach(function(t){t.disable||(t.check=!0)}):this.shops.forEach(function(t){t.check=!1})},handleCheckedCitiesChange:function(t){var e=0;this.shops.forEach(function(t){t.check||t.disable||e++}),this.checkAll=!(e>0)},clickConfirm:function(){var t=this;if(this.dataValidation()){var e=[];this.shops.forEach(function(t){t.check&&e.push(t.shopid+",")}),this.para.ShopIDs=e.join(","),this.$store.dispatch("queryChangeWxConfigInfo",this.para).then(function(e){t.$message({type:"success",message:"修改成功"}),t.$emit("close")}).catch(function(){})}},clickCancel:function(){this.$emit("close")},dataValidation:function(){return""===this.para.MpName?(this.$message.error("请输入公众号名称"),!1):""===this.para.MpAppID?(this.$message.error("请输入公众号ID"),!1):""===this.para.MpAppSecret?(this.$message.error("请输入AppSecret"),!1):""===this.para.MCHID?(this.$message.error("请输入商户号"),!1):""!==this.para.PayKEY||(this.$message.error("请输入支付密钥"),!1)},getShops:function(){var t=this;this.$store.dispatch("queryShops",{id:this.id}).then(function(e){t.shops=[],e.forEach(function(e){var a={};a.shopid=e.shopid,a.shopname=e.shopname,a.address=e.address,a.authtype=e.authtype,a.groupaccountid=e.groupaccountid,0!==t.id&&a.groupaccountid===t.id?a.check=!0:a.check=!1,0===a.groupaccountid||a.groupaccountid===t.id?a.disable=!1:a.disable=!0,t.shops.push(a)}),t.handleCheckedCitiesChange()}).catch(function(){})},queryWeshopInfo:function(){var t=this;this.$store.dispatch("queryWeshopInfo",{id:this.id,isshow:0}).then(function(e){t.para.id=e.account.ID,t.para.MpName=e.account.MpName,t.para.MpAppID=e.account.MpAppID,t.para.MpAppSecret=e.account.MpAppSecret,t.para.MCHID=e.pay.MCHID,t.para.PayKEY=e.pay.PayKEY,t.loading=!1}).catch(function(){})}}},i,!1,function(t){a("1iSO")},"data-v-4138f136",null);e.default=s.exports},Ytcf:function(t,e){},bil3:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("l9IO"),s=a("DFSz"),o=a("vQZy"),n=a("d/TZ"),c=a("utnG"),r=a("W/0o"),l=a("0xDb"),p={name:"weshopmanager",components:{secWeshopAddShop:i.default,secWeshopChangeShop:s.default,secWeshopSetting:o.default,secWeshopShopInfo:n.default,thrWeshopSetting:c.default},mixins:[r.a],mounted:function(){this.getWxConfigListInfo(),this.isMobile()?this.dialogWidth="100%":this.dialogWidth="50%"},data:function(){return{shopInfoDialogVisible:!1,changeShopDialogVisible:!1,weshopSettingdialogVisible:!1,addShopdialogVisible:!1,dialogWidth:"50%",weshopList:[],id:0,address:"",innerVisible:!1,fullAddress:""}},methods:{tranlatePath:function(t){return Object(l.a)(t)},isPermission:function(t){for(var e=-1,a=0;a<this.$store.getters.funcList.length&&-1===e;a++)for(var i=0;i<this.$store.getters.funcList[a].length;i++)if(this.$store.getters.funcList[a][i].ID===t&&0!==this.$store.getters.funcList[a][i].IsSelected){e=t;break}return-1!==e},clickShop:function(t){var e=this;this.shopInfoDialogVisible=!0,this.id=t,this.$nextTick(function(){e.$refs.secWeshopShopInfoRef.update()})},addWeShop:function(){var t=this;this.addShopdialogVisible=!0,this.$nextTick(function(){t.$refs.secWeshopAddShopRef.update()})},getWxConfigListInfo:function(){var t=this;this.loading=!0,this.$store.dispatch("queryWeShopList").then(function(e){t.weshopList=e,t.id=e.id}).catch(function(){})},clickModify:function(t){var e=this;this.changeShopDialogVisible=!0,this.id=t,this.$nextTick(function(){e.$refs.secWeshopChangeShopRef.update()})},clickDel:function(t){var e=this;this.$confirm("如果删除会将该下面门店的公众号和收款账号信息清空，确认要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$store.dispatch("queryDeleteWxConfigInfo",{id:t}).then(function(t){e.$message({type:"success",message:"删除成功!"}),e.getWxConfigListInfo()}).catch(function(){e.$message.error("删除失败")})}).catch(function(){})},handleClick:function(t){var e=this;this.weshopSettingdialogVisible=!0,this.id=t,this.$nextTick(function(){e.$refs.secWeshopSettingRef.getSettingInfo()})},closeAddWeshopDialog:function(){this.addShopdialogVisible=!1,this.getWxConfigListInfo()},closeChangeWeshopDialog:function(){this.changeShopDialogVisible=!1,this.getWxConfigListInfo()},closeSettingDialog:function(){this.weshopSettingdialogVisible=!1,this.getWxConfigListInfo()},onCopy:function(t){this.$message("复制成功")},onError:function(t){this.$message.error("复制失败")},clipBoardContent:function(t){return"http://wx.handnear.com/chain/index.aspx?groupaccountid="+t+"&groupcode="+this.$store.getters.code},clickOp:function(t,e){var a=this;this.innerVisible=!0,this.address=t,this.fullAddress=e,this.$nextTick(function(){a.$refs.thrWeshopSettingRef.update()})},result:function(t){var e=this;this.innerVisible=!1,this.address=t,this.$nextTick(function(){e.$refs.secWeshopSettingRef.setData()})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isPermission(79)?a("div",[a("div",[t.isPermission(81)?a("el-button",{staticClass:"add_btn",on:{click:function(e){t.addWeShop()}}},[t._v(" + 添加公众号")]):t._e()],1),t._v(" "),t._l(t.weshopList,function(e){return a("div",{key:e.id,attrs:{label:e.mpname}},[a("div",{staticStyle:{"background-color":"#37bfc8",padding:"10px","margin-top":"20px"}},[t.isPermission(80)?a("span",{staticClass:"head_title_class",on:{click:function(a){t.clickShop(e.id)}}},[t._v(t._s(e.mpname))]):a("span",[t._v(t._s(e.mpname))]),t._v(" "),a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.clipBoardContent(e.id),expression:"clipBoardContent(item.id)",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"ml10",staticStyle:{"margin-left":"30px",color:"#262626",padding:"10px"},attrs:{size:"medium"}},[t._v("复制微店页面地址")]),t._v(" "),t.isPermission(82)?a("span",{staticStyle:{"margin-left":"30px",color:"#fff","font-size":"14px",cursor:"pointer"},on:{click:function(a){t.clickModify(e.id)}}},[t._v("修改")]):t._e(),t._v(" "),t.isPermission(84)?a("span",{staticStyle:{color:"#fff","font-size":"14px",cursor:"pointer"},on:{click:function(a){t.clickDel(e.id)}}},[t._v("删除")]):t._e()],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.wxshops,border:""}},[a("el-table-column",{attrs:{prop:"shopname",label:"门店名称",width:"250"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址",width:"400"}}),t._v(" "),a("el-table-column",{attrs:{prop:"pro3",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.isPermission(83)?a("el-button",{staticStyle:{color:"#37bfc8"},attrs:{type:"text",size:"small"},on:{click:function(a){t.handleClick(e.row.shopid)}}},[t._v("配置")]):t._e()]}}])})],1)],1)}),t._v(" "),a("p",[t._v("\n      停用门店在连锁微店不显示\n    ")]),t._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],ref:"dialog_wrapper",staticClass:"dialog-container",attrs:{title:"查看微信公众号",visible:t.shopInfoDialogVisible,width:t.dialogWidth,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(e){t.shopInfoDialogVisible=e}}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("p",{staticStyle:{color:"#37bfc8"}},[t._v("查看微信公众号")])]),t._v(" "),a("div",{staticClass:"dialog-body"},[a("secWeshopShopInfo",{ref:"secWeshopShopInfoRef",attrs:{id:t.id}}),t._v(" "),a("div",{directives:[{name:"dialogDragWidth",rawName:"v-dialogDragWidth",value:t.$refs.dialog_wrapper,expression:"$refs.dialog_wrapper"}],staticClass:"line"})],1)]),t._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],ref:"dialog_wrapper",staticClass:"dialog-container",attrs:{title:"修改微信公众号",visible:t.changeShopDialogVisible,width:t.dialogWidth,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(e){t.changeShopDialogVisible=e}}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("p",{staticStyle:{color:"#37bfc8"}},[t._v("修改微信公众号")])]),t._v(" "),a("div",{staticClass:"dialog-body"},[a("secWeshopChangeShop",{ref:"secWeshopChangeShopRef",attrs:{id:t.id},on:{close:t.closeChangeWeshopDialog}}),t._v(" "),a("div",{directives:[{name:"dialogDragWidth",rawName:"v-dialogDragWidth",value:t.$refs.dialog_wrapper,expression:"$refs.dialog_wrapper"}],staticClass:"line"})],1)]),t._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],ref:"dialog_wrapper",staticClass:"dialog-container",attrs:{title:"添加微信公众号",visible:t.addShopdialogVisible,width:t.dialogWidth,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(e){t.addShopdialogVisible=e}}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("p",{staticStyle:{color:"#37bfc8"}},[t._v("添加微信公众号")])]),t._v(" "),a("div",{staticClass:"dialog-body"},[a("secWeshopAddShop",{ref:"secWeshopAddShopRef",on:{close:t.closeAddWeshopDialog}}),t._v(" "),a("div",{directives:[{name:"dialogDragWidth",rawName:"v-dialogDragWidth",value:t.$refs.dialog_wrapper,expression:"$refs.dialog_wrapper"}],staticClass:"line"})],1)]),t._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],ref:"dialog_wrapper",staticClass:"dialog-container",attrs:{title:"门店微店配置",visible:t.weshopSettingdialogVisible,width:t.dialogWidth,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(e){t.weshopSettingdialogVisible=e}}},[a("el-dialog",{attrs:{width:t.dialogWidth,fullscreen:!0,"modal-append-to-body":!1,title:"选择地址","close-on-click-modal":!1,visible:t.innerVisible,"append-to-body":""},on:{"update:visible":function(e){t.innerVisible=e}}},[a("thrWeshopSetting",{ref:"thrWeshopSettingRef",attrs:{fullAddress:t.fullAddress,address:t.address},on:{result:t.result}}),t._v(" "),a("div",{directives:[{name:"dialogDragWidth",rawName:"v-dialogDragWidth",value:t.$refs.dialog_wrapper,expression:"$refs.dialog_wrapper"}],staticClass:"line"})],1),t._v(" "),a("div",{attrs:{slot:"title"},slot:"title"},[a("p",{staticStyle:{color:"#37bfc8"}},[t._v("门店微店配置")])]),t._v(" "),a("div",{staticClass:"dialog-body"},[a("secWeshopSetting",{ref:"secWeshopSettingRef",attrs:{address:t.address,id:t.id},on:{close:t.closeSettingDialog,clickOp:t.clickOp}}),t._v(" "),a("div",{directives:[{name:"dialogDragWidth",rawName:"v-dialogDragWidth",value:t.$refs.dialog_wrapper,expression:"$refs.dialog_wrapper"}],staticClass:"line"})],1)],1)],2):a("div",[a("img",{staticClass:"title-image",attrs:{src:t.tranlatePath("static/img/noPermission.png"),width:"100%"}})])])},staticRenderFns:[]};var h=a("VU/8")(p,d,!1,function(t){a("jyYw")},"data-v-48c9e5af",null);e.default=h.exports},cVGI:function(t,e){},"d/TZ":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"center_wrap"},[a("div",{staticClass:"bg"},[a("p",{staticClass:"grid-content"},[t._v("微信公众配置")]),t._v(" "),a("p",[t._v("\n      公众号名称：\n    "),a("el-input",{staticClass:"el-input",attrs:{disabled:!0,type:"text",autoComplete:"off",placeholder:""},model:{value:t.para.MpName,callback:function(e){t.$set(t.para,"MpName",e)},expression:"para.MpName"}}),t._v(" "),a("span",{staticStyle:{color:"#e33c32"}},[t._v("*")])],1),t._v(" "),a("p",[t._v("\n      公 众 号 ID：\n      "),a("el-input",{staticClass:"el-input",attrs:{disabled:!0,type:"text",autoComplete:"off",placeholder:""},model:{value:t.para.MpAppID,callback:function(e){t.$set(t.para,"MpAppID",e)},expression:"para.MpAppID"}}),t._v(" "),a("span",{staticStyle:{color:"#e33c32"}},[t._v("*")])],1),t._v(" "),a("p",[t._v("\n      AppSecret：\n      "),a("el-input",{staticClass:"el-input",attrs:{disabled:!0,type:"text",autoComplete:"off",placeholder:""},model:{value:t.para.MpAppSecret,callback:function(e){t.$set(t.para,"MpAppSecret",e)},expression:"para.MpAppSecret"}}),t._v(" "),a("span",{staticStyle:{color:"#e33c32"}},[t._v("*")])],1)]),t._v(" "),a("div",{staticClass:"bg"},[a("p",{staticClass:"grid-content"},[t._v("微信收款帐号配置")]),t._v(" "),a("p",[t._v("\n      商户号：\n      "),a("el-input",{staticClass:"el-input",attrs:{disabled:!0,type:"text",autoComplete:"off",placeholder:""},model:{value:t.para.MCHID,callback:function(e){t.$set(t.para,"MCHID",e)},expression:"para.MCHID"}}),t._v(" "),a("span",{staticStyle:{color:"#e33c32"}},[t._v("*")])],1),t._v(" "),a("p",[t._v("\n      支付密钥：\n      "),a("el-input",{staticClass:"el-input",attrs:{disabled:!0,type:"text",autoComplete:"off",placeholder:""},model:{value:t.para.PayKEY,callback:function(e){t.$set(t.para,"PayKEY",e)},expression:"para.PayKEY"}}),t._v(" "),a("span",{staticStyle:{color:"#e33c32"}},[t._v("*")])],1)]),t._v(" "),a("div",{staticClass:"bg"},[a("p",{staticClass:"grid-content"},[t._v("该公众号下的门店")]),t._v(" "),t._l(t.shops,function(e){return a("span",{key:e.shopid,staticStyle:{"margin-right":"20px"},attrs:{label:e.shopid}},[t._v(t._s(e.shopname))])})],2)])},staticRenderFns:[]};var s=a("VU/8")({props:{id:{default:0}},data:function(){return{shops:[],checkAll:!1,isIndeterminate:!1,loading:!0,para:{id:this.id,MpName:"",MpAppID:"",MpAppSecret:"",MCHID:"",PayKEY:"",ShopIDs:""}}},created:function(){this.update()},methods:{update:function(){this.getShops(),this.queryWeshopInfo(),this.loading=!0},clickConfirm:function(){this.dataValidation()&&this.$store.dispatch("queryAddWxConfigInfo",this.para).then(function(t){}).catch(function(){})},dataValidation:function(){return""===this.para.MpName?(this.$message.error("请输入公众号名称"),!1):""===this.para.MpAppID?(this.$message.error("请输入公众号ID"),!1):""===this.para.MpAppSecret?(this.$message.error("请输入AppSecret"),!1):""===this.para.MCHID?(this.$message.error("请输入商户号"),!1):""!==this.para.PayKEY||(this.$message.error("请输入支付密钥"),!1)},getShops:function(){var t=this;this.$store.dispatch("queryShops",{id:this.id}).then(function(e){t.shops=[],e.forEach(function(e){var a={};a.shopid=e.shopid,a.shopname=e.shopname,a.address=e.address,a.authtype=e.authtype,a.groupaccountid=e.groupaccountid,a.groupaccountid===t.id&&t.shops.push(a)}),t.handleCheckedCitiesChange()}).catch(function(){})},queryWeshopInfo:function(){var t=this;this.$store.dispatch("queryWeshopInfo",{id:this.id,isshow:0}).then(function(e){t.para.MpName=e.account.MpName,t.para.MpAppID=e.account.MpAppID,t.para.MpAppSecret=e.account.MpAppSecret,t.para.MCHID=e.pay.MCHID,t.para.PayKEY=e.pay.PayKEY,t.loading=!1}).catch(function(){})}}},i,!1,function(t){a("CPxm")},"data-v-14e8fcca",null);e.default=s.exports},jyYw:function(t,e){},l9IO:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"parent"},[a("div",{staticClass:"bg"},[a("p",{staticClass:"grid-content"},[t._v("微信公众配置")]),t._v(" "),a("p",[t._v("\n      公众号名称：\n    "),a("el-input",{staticClass:"el-input",attrs:{type:"text",autoComplete:"off",placeholder:""},model:{value:t.para.MpName,callback:function(e){t.$set(t.para,"MpName",e)},expression:"para.MpName"}}),t._v(" "),a("span",{staticStyle:{color:"#e33c32"}},[t._v("*")])],1),t._v(" "),a("p",[t._v("\n      公 众 号 ID：\n      "),a("el-input",{staticClass:"el-input",attrs:{type:"text",autoComplete:"off",placeholder:""},model:{value:t.para.MpAppID,callback:function(e){t.$set(t.para,"MpAppID",e)},expression:"para.MpAppID"}}),t._v(" "),a("span",{staticStyle:{color:"#e33c32"}},[t._v("*")])],1),t._v(" "),a("p",[t._v("\n      AppSecret：\n      "),a("el-input",{staticClass:"el-input",attrs:{type:"text",autoComplete:"off",placeholder:""},model:{value:t.para.MpAppSecret,callback:function(e){t.$set(t.para,"MpAppSecret",e)},expression:"para.MpAppSecret"}}),t._v(" "),a("span",{staticStyle:{color:"#e33c32"}},[t._v("*")])],1)]),t._v(" "),a("div",{staticClass:"bg"},[a("p",{staticClass:"grid-content"},[t._v("微信收款帐号配置")]),t._v(" "),a("p",[t._v("\n      商户号：\n      "),a("el-input",{staticClass:"el-input",attrs:{type:"text",autoComplete:"off",placeholder:""},model:{value:t.para.MCHID,callback:function(e){t.$set(t.para,"MCHID",e)},expression:"para.MCHID"}}),t._v(" "),a("span",{staticStyle:{color:"#e33c32"}},[t._v("*")])],1),t._v(" "),a("p",[t._v("\n      支付密钥：\n      "),a("el-input",{staticClass:"el-input",attrs:{type:"text",autoComplete:"off",placeholder:""},model:{value:t.para.PayKEY,callback:function(e){t.$set(t.para,"PayKEY",e)},expression:"para.PayKEY"}}),t._v(" "),a("span",{staticStyle:{color:"#e33c32"}},[t._v("*")])],1)]),t._v(" "),a("div",{staticClass:"bg"},[a("p",{staticClass:"grid-content"},[t._v("选择该公众号下的门店")]),t._v(" "),a("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),t._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),t._v(" "),a("el-checkbox-group",{on:{change:t.handleCheckedCitiesChange},model:{value:t.checkShops,callback:function(e){t.checkShops=e},expression:"checkShops"}},t._l(t.shops,function(e){return a("el-checkbox",{key:e.shopid,attrs:{label:e.shopid,disabled:e.disable}},[t._v(t._s(e.shopname))])}))],1),t._v(" "),a("div",{staticStyle:{width:"260px",margin:"auto","white-space":"nowrap"}},[a("el-button",{staticClass:"el_save_btn",on:{click:t.clickConfirm}},[t._v("确定")]),t._v(" "),a("el-button",{staticClass:"el_cancel_btn",on:{click:t.clickCancel}},[t._v("取消")])],1)])},staticRenderFns:[]};var s=a("VU/8")({data:function(){return{shops:[],checkShops:[],checkAll:!1,isIndeterminate:!1,loading:!0,para:{id:0,MpName:"",MpAppID:"",MpAppSecret:"",MCHID:"",PayKEY:"",ShopIDs:""}}},created:function(){this.getShops()},methods:{update:function(){this.checkShops=[],this.isIndeterminate=!1,this.checkAll=!1,this.para={id:0,MpName:"",MpAppID:"",MpAppSecret:"",MCHID:"",PayKEY:"",ShopIDs:""},this.getShops()},handleCheckAllChange:function(t){var e=[];this.shops.forEach(function(t){t.disable||e.push(t.shopid)}),this.checkShops=t?e:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(t){this.checkShops=t;var e=t.length;this.checkAll=e===this.shops.length,this.isIndeterminate=e>0&&e<this.shops.length},clickConfirm:function(){var t=this;if(this.dataValidation()){for(var e=[],a=0;a<this.checkShops.length;a++)this.checkShops.length-1!==a?e.push(this.checkShops[a]+","):e.push(this.checkShops[a]);this.para.ShopIDs=e.join(""),this.$store.dispatch("queryAddWxConfigInfo",this.para).then(function(e){t.$message({type:"success",message:"添加成功"}),t.$emit("close")}).catch(function(){})}},clickCancel:function(){this.$emit("close")},dataValidation:function(){return""===this.para.MpName.trim()?(this.$message.error("请输入公众号名称"),!1):""===this.para.MpAppID.trim()?(this.$message.error("请输入公众号ID"),!1):""===this.para.MpAppSecret.trim()?(this.$message.error("请输入AppSecret"),!1):""===this.para.MCHID.trim()?(this.$message.error("请输入商户号"),!1):""!==this.para.PayKEY.trim()||(this.$message.error("请输入支付密钥"),!1)},getShops:function(){var t=this;this.loading=!0,this.$store.dispatch("queryShops",{id:0}).then(function(e){t.shops=[],e.forEach(function(e){var a={};a.shopid=e.shopid,a.shopname=e.shopname,a.address=e.address,a.authtype=e.authtype,a.groupaccountid=e.groupaccountid,0===a.groupaccountid?a.disable=!1:a.disable=!0,t.shops.push(a)}),t.loading=!1}).catch(function(){})}}},i,!1,function(t){a("Cozu")},"data-v-68cdcd32",null);e.default=s.exports},utnG:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={props:{address:{type:String,default:function(){return""}},fullAddress:{type:String,default:function(){return""}}},data:function(){return{}},methods:{update:function(){""===this.address&&(this.address=this.fullAddress)},searchcomplete:function(t){this.$emit("result",t.address)}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",[t._v("地区:"+t._s(t.fullAddress))]),t._v(" "),a("label",[t._v("地址:"),a("el-input",{attrs:{placeholder:"请输入您的地址"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),t._v(" "),a("baidu-map",[a("bm-view",{staticStyle:{width:"100%",height:"300px",flex:"1","margin-top":"20px"}}),t._v(" "),a("bm-local-search",{attrs:{keyword:t.address,"auto-viewport":!0},on:{infohtmlset:t.searchcomplete}})],1)],1)},staticRenderFns:[]};var o=a("VU/8")(i,s,!1,function(t){a("Ytcf")},null,null);e.default=o.exports},vQZy:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("BO1k"),s=a.n(i),o=a("EYHf"),n=a("CnLx"),c={name:"enterpriseinfo",mixins:[a("W/0o").a],mounted:function(){this.isMobile()?this.disabled=!0:this.disabled=!1},created:function(){this.getSettingInfo()},props:{id:{default:0},address:{type:String,default:function(){return""}}},data:function(){return{cityOptions:o.a,citys:[],imgSrc:"",hind:!0,disabled:!1,para:{Title:"",Address:"",ProvinceID:"",CityID:"",AreaID:"",ShopID:this.id,Pic:""},fullAddress:""}},methods:{getSettingInfo:function(){var t=this;this.para.ShopID=this.id,this.$store.dispatch("querySettingInfo",{id:this.id}).then(function(e){t.para.Title=e.shopinfo.Title,t.para.Address=e.shopwx.Address,t.para.ProvinceID=e.shopwx.ProvinceID,t.para.CityID=e.shopwx.CityID,t.para.AreaID=e.shopwx.AreaID,t.imgSrc=Object(n.a)()+e.shopwx.Pic,t.para.Pic=e.shopwx.Pic,t.citys=[],t.citys.push(t.para.ProvinceID.toString()),t.citys.push(t.para.CityID.toString()),t.citys.push(t.para.AreaID.toString()),""===e.shopwx.Pic?t.hind=!0:t.hind=!1,t.getFullAddress()}).catch(function(){})},clickConfirm:function(){var t=this;3===this.citys.length?""!==this.para.Address?""!==this.para.Pic?this.$store.dispatch("querySettingWxConfigInfo",this.para).then(function(e){t.$message({type:"success",message:"保存成功"}),t.$emit("close")}).catch(function(){}):this.$message.error("请上传门头照"):this.$message.error("请输入详细地址"):this.$message.error("请选择完整的地址")},clickCancle:function(){this.$emit("close")},changeProvince:function(){this.para.ProvinceID=void 0!==this.citys[0]?this.citys[0]:"",this.para.CityID=void 0!==this.citys[1]?this.citys[1]:"",this.para.AreaID=void 0!==this.citys[2]?this.citys[2]:"",this.getFullAddress()},getFullAddress:function(){if(3===this.citys.length){var t=[];this.getCascaderObj(this.citys,this.cityOptions).forEach(function(e){t.push(e.label)}),this.fullAddress=t.join("")}},handleAvatarSuccess:function(t,e){var a=t.indexOf("Msg")+6,i=t.indexOf("}")-1,s=t.substring(a,i);this.para.Pic=s,this.imgSrc=URL.createObjectURL(e.raw),this.hind=!1},beforeAvatarUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error("上传头像图片大小不能超过 2MB!"),e},clickAdress:function(){0!==this.para.ProvinceID&&0!==this.para.CityID&&0!==this.para.AreaID?this.$emit("clickOp",this.para.Address,this.fullAddress):this.$message.error("请先选择省市区")},setData:function(){this.para.Address=this.address},getCascaderObj:function(t,e){return t.map(function(t,a,i){var o=!0,n=!1,c=void 0;try{for(var r,l=s()(e);!(o=(r=l.next()).done);o=!0){var p=r.value;if(p.value===t)return e=p.children,p}}catch(t){n=!0,c=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw c}}return null})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{}},[a("p",{staticClass:"infoPerLine1"},[a("span",{staticClass:"infoShowName"},[t._v("\n      门店：\n    ")]),t._v("\n    "+t._s(t.para.Title)+"\n  ")]),t._v(" "),a("div",{staticClass:"infoPerLine"},[a("span",{staticClass:"infoShowName"},[t._v("\n        联系地址：\n    ")]),t._v(" "),a("el-cascader",{staticClass:"cascader",attrs:{options:t.cityOptions,"change-on-select":""},on:{change:t.changeProvince},model:{value:t.citys,callback:function(e){t.citys=e},expression:"citys"}}),t._v(" "),a("el-input",{staticClass:"address_input el-input",attrs:{type:"text",autocomplete:"off"},on:{focus:t.clickAdress},model:{value:t.para.Address,callback:function(e){t.$set(t.para,"Address",e)},expression:"para.Address"}}),t._v(" "),a("span",{staticStyle:{color:"#e33c32"}},[t._v("*")])],1),t._v(" "),a("p",{staticClass:"infoPerLine1"},[a("span",{staticClass:"infoShowName"},[t._v("连锁微店门头照片：")]),t._v(" "),a("span",{staticStyle:{color:"#e33c32"}},[t._v("*")]),t._v(" "),a("el-upload",{staticClass:"avatar-uploader",staticStyle:{"text-align":"center"},attrs:{disabled:t.disabled,action:"https://link.handnear.com/up/upload.aspx?t=chain_pic&r=/","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.hind?a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}):a("img",{staticClass:"avatar",attrs:{src:t.imgSrc,onerror:"javascript:this.src='http://r.handnear.com/wechat/images/shopwxsrc.png'"}}),t._v(" "),t.hind?t._e():a("span",{staticStyle:{color:"#37bfc8"}},[a("u",[t._v("更换")])])])],1),t._v(" "),a("div",{staticStyle:{width:"260px",margin:"auto","white-space":"nowrap"}},[a("el-button",{staticClass:"save_btn",on:{click:t.clickConfirm}},[t._v("确定")]),t._v(" "),a("el-button",{staticClass:"el_cancel_btn",on:{click:t.clickCancle}},[t._v("取消")])],1)])},staticRenderFns:[]};var l=a("VU/8")(c,r,!1,function(t){a("cVGI")},"data-v-84fd756a",null);e.default=l.exports}});
//# sourceMappingURL=2.220eacbffbeebdb6c58e.js.map