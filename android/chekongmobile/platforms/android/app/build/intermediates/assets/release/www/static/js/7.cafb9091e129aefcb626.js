webpackJsonp([7,32,43],{"9QVb":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Tzly"),s=a("y8DS"),n=a("W/0o"),o=a("0xDb"),l={name:"departmentmanager",components:{secDepartmentMod:i.default,secDepartmentAdd:s.default},mixins:[n.a],data:function(){return{tableData:[],dialogVisible1:!1,dialogVisible2:!1,dialogWidth:"50%",PageIndex:1,PageTotal:1,sendData:{}}},mounted:function(){this.getDepartmentListInfo(1),this.isMobile()?this.dialogWidth="100%":this.dialogWidth="50%"},methods:{tranlatePath:function(t){return Object(o.a)(t)},isPermission:function(t){for(var e=-1,a=0;a<this.$store.getters.funcList.length&&-1===e;a++)for(var i=0;i<this.$store.getters.funcList[a].length;i++)if(this.$store.getters.funcList[a][i].ID===t&&0!==this.$store.getters.funcList[a][i].IsSelected){e=t;break}return-1!==e},clickModify:function(t){var e=this;this.sendData=t,this.dialogVisible2=!0,this.$nextTick(function(){e.$refs.secDepartmentModRef.update()})},clickAdd:function(){this.dialogVisible1=!0},getDepartmentListInfo:function(t){var e=this;this.$store.dispatch("queryDepartmentListInfo",{PageIndex:t,PageSize:20}).then(function(t){e.tableData=[],e.PageIndex=t.PageIndex,e.PageTotal=t.PageTotal,e.$refs.bottomPagination.lastEmittedPage=e.pageIndex,t.listInfo.forEach(function(t){var a={};a.ID=t.ID,a.GroupID=t.GroupID,a.ParentID=t.ParentID,a.State=t.State,a.AdminID=t.AdminID,a.AddTime=t.AddTime,a.ModifyTime=t.ModifyTime,a.IDStr=t.IDStr,a.Title=t.Title,a.Remark=t.Remark,e.tableData.push(a)})}).catch(function(){})},changePageHandle:function(){this.getDepartmentListInfo(this.PageIndex)},clickDel:function(t){var e=this;this.$confirm("确定要删除吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$store.dispatch("querydeleteDepartmentInfo",{id:t}).then(function(t){e.$message({type:"success",message:"删除成功!"}),e.getDepartmentListInfo()}).catch(function(){e.$message.error("删除失败")})}).catch(function(){})},closeDialog1:function(){this.dialogVisible1=!1,this.getDepartmentListInfo()},closeDialog2:function(){this.dialogVisible2=!1,this.getDepartmentListInfo()}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isPermission(70)?a("div",[a("div",[t.isPermission(71)?a("el-button",{staticClass:"add_btn_class",on:{click:function(e){t.clickAdd()}}},[t._v("+新增部门")]):t._e()],1),t._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{staticClass:"name_link_class",attrs:{prop:"Title",label:"部门名称",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Remark",label:"描述",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"operation",label:"操作",width:"400"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.isPermission(72)?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.clickModify(e.row)}}},[t._v("修改")]):t._e(),t._v(" "),t.isPermission(73)?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.clickDel(e.row.ID)}}},[t._v("删除")]):t._e()]}}])})],1)],1),t._v(" "),a("div",[a("el-pagination",{ref:"bottomPagination",staticClass:"el_pagination_class",attrs:{background:"",layout:"prev, pager, next","current-page":t.PageIndex,"page-size":20,total:t.PageTotal},on:{"current-change":t.changePageHandle,"update:currentPage":function(e){t.PageIndex=e}}})],1),t._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],ref:"dialog_wrapper",staticClass:"dialog-container",attrs:{title:"新增部门","modal-append-to-body":!1,visible:t.dialogVisible1,width:t.dialogWidth,"close-on-click-modal":!1,sendData:t.sendData},on:{"update:visible":function(e){t.dialogVisible1=e}}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("p",{staticStyle:{color:"#37bfc8"}},[t._v("新增部门")])]),t._v(" "),a("div",{staticClass:"dialog-body"},[a("secDepartmentAdd",{on:{close:t.closeDialog1}}),t._v(" "),a("div",{directives:[{name:"dialogDragWidth",rawName:"v-dialogDragWidth",value:t.$refs.dialog_wrapper,expression:"$refs.dialog_wrapper"}],staticClass:"line"})],1)]),t._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],ref:"dialog_wrapper",staticClass:"dialog-container",attrs:{title:"修改部门","modal-append-to-body":!1,visible:t.dialogVisible2,width:t.dialogWidth,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible2=e}}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("p",{staticStyle:{color:"#37bfc8"}},[t._v("修改部门")])]),t._v(" "),a("div",{staticClass:"dialog-body"},[a("secDepartmentMod",{ref:"secDepartmentModRef",attrs:{sendData:t.sendData},on:{close:t.closeDialog2}}),t._v(" "),a("div",{directives:[{name:"dialogDragWidth",rawName:"v-dialogDragWidth",value:t.$refs.dialog_wrapper,expression:"$refs.dialog_wrapper"}],staticClass:"line"})],1)])],1):a("div",[a("img",{staticClass:"title-image",attrs:{src:t.tranlatePath("static/img/noPermission.png"),width:"100%"}})])])},staticRenderFns:[]};var c=a("VU/8")(l,r,!1,function(t){a("NYM5")},"data-v-3f8ffedc",null);e.default=c.exports},EwId:function(t,e){},LZEA:function(t,e){},NYM5:function(t,e){},Tzly:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={props:{sendData:{type:Object,default:function(){return{}}}},data:function(){return{para:{ID:this.sendData.ID,Title:this.sendData.Title,Remark:this.sendData.Remark}}},methods:{update:function(){this.para={ID:this.sendData.ID,Title:this.sendData.Title,Remark:this.sendData.Remark}},clickCancel:function(){this.$emit("close")},clickComfirm:function(){var t=this;this.dataValidation()&&this.$store.dispatch("queryChangeDepartmentInfo",this.para).then(function(e){t.$message({type:"success",message:"修改成功"}),t.$emit("close")}).catch(function(){t.$message.error("修改失败")})},dataValidation:function(){return""!==this.para.Title||(this.$message.error("请输入部门名称"),!1)}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"infoPerLine1",staticStyle:{width:"300px",margin:"auto","white-space":"nowrap"}},[a("p",[a("span",{staticClass:"infoShowName"},[t._v("部门名称：")]),t._v(" "),a("el-input",{staticClass:"el-input",attrs:{type:"text",autoComplete:"off"},model:{value:t.para.Title,callback:function(e){t.$set(t.para,"Title",e)},expression:"para.Title"}}),t._v(" "),a("span",{staticStyle:{color:"#e33c32"}},[t._v("*")])],1),t._v(" "),a("p",{staticClass:"infoPerLine1"},[a("span",{staticClass:"infoShowName"},[t._v("描述：")]),t._v(" "),a("el-input",{attrs:{type:"textarea",autosize:""},model:{value:t.para.Remark,callback:function(e){t.$set(t.para,"Remark",e)},expression:"para.Remark"}})],1)]),t._v(" "),a("div",{staticStyle:{width:"260px",margin:"auto","white-space":"nowrap"}},[a("el-button",{staticClass:"el_save_btn",on:{click:t.clickComfirm}},[t._v("确定")]),t._v(" "),a("el-button",{staticClass:"el_cancel_btn",on:{click:t.clickCancel}},[t._v("取消")])],1)])},staticRenderFns:[]};var n=a("VU/8")(i,s,!1,function(t){a("LZEA")},"data-v-0e97fbee",null);e.default=n.exports},y8DS:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{width:"300px",margin:"auto","white-space":"nowrap"}},[a("p",{staticClass:"infoPerLine1"},[a("span",{staticClass:"infoShowName"},[t._v("部门名称：")]),t._v(" "),a("el-input",{staticClass:"el-input",attrs:{type:"text",autoComplete:"off"},model:{value:t.para.Title,callback:function(e){t.$set(t.para,"Title",e)},expression:"para.Title"}}),t._v(" "),a("span",{staticStyle:{color:"#e33c32"}},[t._v("*")])],1),t._v(" "),a("p",{staticClass:"infoPerLine1"},[a("span",{staticClass:"infoShowName"},[t._v("描述：")]),t._v(" "),a("el-input",{attrs:{type:"textarea",autosize:""},model:{value:t.para.Remark,callback:function(e){t.$set(t.para,"Remark",e)},expression:"para.Remark"}})],1)]),t._v(" "),a("div",{staticStyle:{width:"260px",margin:"auto","white-space":"nowrap"}},[a("el-button",{staticClass:"el_save_btn",on:{click:t.clickComfirm}},[t._v("确定")]),t._v(" "),a("el-button",{staticClass:"el_cancel_btn",on:{click:t.clickCancel}},[t._v("取消")])],1)])},staticRenderFns:[]};var s=a("VU/8")({data:function(){return{para:{Title:"",Remark:""}}},methods:{clickCancel:function(){this.$emit("close")},clickComfirm:function(){var t=this;this.dataValidation()&&this.$store.dispatch("queryAddDepartmentInfo",this.para).then(function(e){t.$message("添加成功"),t.para.Title="",t.para.Remark="",t.$emit("close")}).catch(function(){})},dataValidation:function(){return""!==this.para.Title||(this.$message.error("请输入部门名称"),!1)}}},i,!1,function(t){a("EwId")},"data-v-3dc4c8aa",null);e.default=s.exports}});
//# sourceMappingURL=7.cafb9091e129aefcb626.js.map