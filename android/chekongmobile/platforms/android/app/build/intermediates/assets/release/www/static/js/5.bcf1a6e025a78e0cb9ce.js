webpackJsonp([5,25,31,36],{"2S6r":function(e,a){},"7/DO":function(e,a){},A8wg:function(e,a){},"LN/H":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("div",[t("p",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoShowName"},[e._v("会员卡名称：")]),e._v("\n      "+e._s(e.pro1)+"\n    ")]),e._v(" "),t("p",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoShowName"},[e._v("消费折扣：")]),e._v("\n      "+e._s(e.pro2)+"\n    ")]),e._v(" "),t("p",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoShowName"},[e._v("初始储值：")]),e._v("\n      "+e._s(e.pro3)+"\n      "),t("span",{staticClass:"infoShowName"},[e._v("售卡金额：")]),e._v("\n      "+e._s(e.pro4)+"\n    ")]),e._v(" "),t("p",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoShowName"},[e._v("会员卡有效期：")]),e._v("\n      "+e._s(e.pro5)+"\n    ")]),e._v(" "),t("p",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoShowName"},[e._v("开卡提成类型：")]),e._v("\n      "+e._s(e.pro6)+"\n      "),t("span",{staticClass:"infoShowName"},[e._v("提成数：")]),e._v("\n      "+e._s(e.pro7)+"\n    ")]),e._v(" "),t("p",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoShowName"},[e._v("充值提成类型：")]),e._v("\n      "+e._s(e.pro8)+"\n      "),t("span",{staticClass:"infoShowName"},[e._v("提成数：")]),e._v("\n      "+e._s(e.pro9)+"\n    ")]),e._v(" "),t("p",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoShowName"},[e._v("状态：")]),e._v(" "),t("span",{class:1===e.IsRed0?"on":"",staticStyle:{"margin-left":"30px"}},[e._v(e._s(e.pro10))]),e._v(" "),t("span",{class:1===e.IsRed1?"on":"",staticStyle:{"margin-left":"30px"}},[e._v(e._s(e.pro11))]),e._v(" "),t("span",{class:1===e.IsRed2?"on":"",staticStyle:{"margin-left":"30px"}},[e._v(e._s(e.pro12))])]),e._v(" "),t("p",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoShowName"},[e._v("积分规则：")]),e._v(" "),t("span",{staticStyle:{"margin-left":"30px"}},[e._v(e._s(e.pro13))]),e._v(" "),t("span",{staticStyle:{"margin-left":"30px"}},[e._v(e._s(e.pro14))])]),e._v(" "),e.isShowSendShops?t("div",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoShowName"},[e._v("可发卡门店：")]),e._v(" "),e._l(e.shopsSendData,function(a){return t("span",{key:a.key,staticStyle:{"margin-left":"20px"},attrs:{label:a.label}},[e._v(e._s(a.label))])})],2):e._e(),e._v(" "),e.isShowUseShops?t("div",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoShowName"},[e._v("可用卡门店：")]),e._v(" "),e._l(e.shopsUseData,function(a){return t("span",{key:a.key,staticStyle:{"margin-left":"20px"},attrs:{label:a.label}},[e._v(e._s(a.label))])})],2):e._e()])])},staticRenderFns:[]};var i=t("VU/8")({props:{id:{default:0}},created:function(){this.update()},data:function(){return{pro1:"",pro2:"",pro3:"",pro4:"",pro5:"",pro6:"",pro7:"",pro8:"",pro9:"",pro10:"",pro11:"",pro12:"",pro13:"",pro14:"",IsRed0:0,IsRed1:0,IsRed2:0,loading:!0,shopsUseData:[],shopsSendData:[],isShowSendShops:!1,isShowUseShops:!1}},methods:{update:function(){this.getInfo(),this.getshops()},getInfo:function(){var e=this;this.loading=!0,this.$store.dispatch("queryUCardInfo",{id:this.id}).then(function(a){e.pro1=a.info.Title,e.pro2=a.info.Discount+"%",e.pro3=a.info.SavePrice+"元",e.pro4=a.info.SalePrice+"元",e.pro5=a.info.ActiveMonth+"个月",e.pro6=e.getSaleCommTypeName(a.info.SaleCommType),e.pro7=a.info.SaleCommType>0?3===a.info.SaleCommType?a.info.SaleComm+"元/张":a.info.SaleComm+"%":"",e.pro8=e.getFillCommTypeName(a.info.FillCommType),e.pro9=a.info.FillCommType>0?a.info.FillComm+"%":"",a.info.IsClose?(e.IsRed0=1,e.pro10="禁用"):e.pro10="启用",a.info.IsAllowPay?e.pro11="可充值":(e.pro11="不可充值",e.IsRed1=1),a.info.IsScore?e.pro12="可积分":(e.pro12="不可积分",e.IsRed2=1),a.info.IsAllowPay&&a.info.IsScore?e.pro13="充值( "+a.info.UCardFillScore+" )元即可获得1积分；":e.pro13="",a.info.IsScore?e.pro14="消费( "+a.info.UCardPayScore+" )元即可获得1积分":e.pro14="",e.loading=!1}).catch(function(){})},getSaleCommTypeName:function(e){switch(e){case 1:return"卡储金额";case 2:return"售卡金额";case 3:return"按张提成"}},getFillCommTypeName:function(e){switch(e){case 1:return"充赠总额";case 2:return"充值金额"}},getshops:function(){var e=this;this.loading=!0,this.$store.dispatch("queryBindShops",{id:this.id}).then(function(a){e.shopsUseData=[],a.shopsUse.forEach(function(a){var t={};t.key=a.ID,t.label=a.Title,e.shopsUseData.push(t)}),e.shopsUseData.length>0?e.isShowUseShops=!0:e.isShowUseShops=!1,e.shopsSendData=[],a.shopsSend.forEach(function(a){var t={};t.key=a.ID,t.label=a.Title,e.shopsSendData.push(t)}),e.shopsSendData.length>0?e.isShowSendShops=!0:e.isShowSendShops=!1,e.loading=!1}).catch(function(){})}}},s,!1,function(e){t("7/DO")},"data-v-63f8f2b2",null);a.default=i.exports},T5zi:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=t("LN/H"),i=t("vGtI"),o=t("cP7m"),l=t("W/0o"),n=t("0xDb"),r={name:"membercardmanager",components:{secMenbCardInfo:s.default,secMenbCardModCard:i.default,secMenbCardAddCard:o.default},mixins:[l.a],data:function(){return{tableData:[],dialogVisible:!1,dialogVisible1:!1,dialogVisible2:!1,dialogWidth:"80%",pageTotal:10,pageIndex:1,loadingview:!1,UcardType:"",id:""}},mounted:function(){this.queryHandleData(1),this.isMobile()?this.dialogWidth="100%":this.dialogWidth="80%"},methods:{tranlatePath:function(e){return Object(n.a)(e)},isPermission:function(e){for(var a=-1,t=0;t<this.$store.getters.funcList.length&&-1===a;t++)for(var s=0;s<this.$store.getters.funcList[t].length;s++)if(this.$store.getters.funcList[t][s].ID===e&&0!==this.$store.getters.funcList[t][s].IsSelected){a=e;break}return-1!==a},changePageHandle:function(){this.queryDataHandle(this.pageIndex)},queryHandleData:function(e){var a=this;this.loadingview=!0,this.$store.dispatch("queryUCardListInfo",{Title:this.UcardType,CardNo:"",Mobile:"",UcardType:this.UcardType,ShopID:0,IsPageClick:1,BeginTime:"",EndTime:"",PageIndex:e,PageSize:20}).then(function(e){a.loadingview=!1,a.pageTotal=e.PageTotal,a.pageIndex=e.PageIndex,a.$refs.bottomPagination.lastEmittedPage=a.pageIndex,a.tableData=[],e.listInfo.forEach(function(e){var t={};t.ID=e.ID,t.membercard_type=e.Title,t.discount=e.Discount+"%",t.initial_saving=e.SavePrice,t.sell_amount=e.SalePrice,t.useful_date=e.ActiveMonth,t.is_charge=a.returnChargeStatus(e.IsAllowPay),t.is_append=a.returnCountStatus(e.IsScore),e.IsScore?(t.recharge_points=0===e.UCardFillScore?"":e.UCardFillScore+"元/分",t.consumption_points=0===e.UCardPayScore?"":e.UCardPayScore+"元/分"):(t.recharge_points="",t.consumption_points=""),t.issuing_store=e.CanSendShops.substring(0,e.CanSendShops.length-1),t.use_card_store=e.CanUseShops.substring(0,e.CanUseShops.length-1),t.statu=a.returnMemberStatus(e.IsClose),a.tableData.push(t)})}).catch(function(){a.loadingview=!1})},returnMemberStatus:function(e){return!1===e?"可用":"禁用"},returnChargeStatus:function(e){return!1===e?"否":"是"},returnCountStatus:function(e){return!1===e?"否":"是"},clickMembCardType:function(e){var a=this;this.dialogVisible=!0,this.id=e,this.$nextTick(function(){a.$refs.secMenbCardInfoRef.update()})},clickModify:function(e){var a=this;this.dialogVisible1=!0,this.id=e,this.$nextTick(function(){a.$refs.secMenbCardModCardRef.update()})},clickAddCard:function(){var e=this;this.dialogVisible2=!0,this.$nextTick(function(){e.$refs.secMenbCardAddCardRef.update()})},clickDel:function(e){var a=this;this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$store.dispatch("queryDeleteUCardInfo",{id:e}).then(function(e){a.$message({type:"success",message:"删除成功!"}),a.queryHandleData(a.pageIndex)}).catch(function(){})}).catch(function(){})},closeAddMenDialog:function(){this.dialogVisible2=!1,this.queryHandleData(this.pageIndex)},closeChangeMenDialog:function(){this.dialogVisible1=!1,this.queryHandleData(this.pageIndex)},closeMenInfoDialog:function(){this.dialogVisible=!1,this.queryHandleData(this.pageIndex)}}},c={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[e.isPermission(59)?t("div",[t("div",[e.isPermission(60)?t("el-button",{staticClass:"add_btn_class",on:{click:e.clickAddCard}},[e._v("+新增会员卡")]):e._e(),e._v(" "),t("div",{staticStyle:{"border-left":"1px solid #e0e0e0",height:"34px","margin-left":"30px",display:"inline-block","vertical-align":"middle","padding-left":"30px"}}),e._v("\n      会员卡类型\n      "),t("el-input",{staticClass:"member-input-content",attrs:{type:"text",autocomplete:"off",placeholder:"请输入会员卡类型"},model:{value:e.UcardType,callback:function(a){e.UcardType=a},expression:"UcardType"}}),e._v(" "),t("el-button",{staticClass:"search_btn",attrs:{loading:e.loadingview},on:{click:function(a){e.queryHandleData(1)}}},[e._v("查询")])],1),e._v(" "),t("div",[t("el-table",{staticClass:"el-table-clss",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{staticClass:"name_link_class",attrs:{prop:"membercard_type",label:"会员卡类型",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.isPermission(63)?t("span",{staticClass:"name_link_class",on:{click:function(t){e.clickMembCardType(a.row.ID)}}},[e._v(e._s(a.row.membercard_type))]):t("span",[e._v(e._s(a.row.membercard_type))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"discount",label:"折扣",width:"120"}}),e._v(" "),t("el-table-column",{attrs:{prop:"initial_saving",label:"初始储值(元)",width:"150"}}),e._v(" "),t("el-table-column",{attrs:{prop:"sell_amount",label:"售卡金额(元)",width:"174"}}),e._v(" "),t("el-table-column",{attrs:{prop:"useful_date",label:"有效期(月)",width:"100"}}),e._v(" "),t("el-table-column",{attrs:{prop:"is_charge",label:"是否可充值",width:"100"}}),e._v(" "),t("el-table-column",{attrs:{prop:"is_append",label:"是否可积分",width:"110"}}),e._v(" "),t("el-table-column",{attrs:{prop:"recharge_points",label:"充值积分",width:"185"}}),e._v(" "),t("el-table-column",{attrs:{prop:"consumption_points",label:"消费积分",width:"83"}}),e._v(" "),t("el-table-column",{attrs:{prop:"issuing_store",label:"可发卡门店",width:"200"}}),e._v(" "),t("el-table-column",{attrs:{prop:"use_card_store",label:"可用卡门店",width:"200"}}),e._v(" "),t("el-table-column",{attrs:{prop:"statu",label:"状态",width:"83"}}),e._v(" "),t("el-table-column",{attrs:{prop:"operation",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.isPermission(61)?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.clickModify(a.row.ID)}}},[e._v("修改")]):e._e(),e._v(" "),e.isPermission(62)?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.clickDel(a.row.ID)}}},[e._v("删除")]):e._e()]}}])})],1)],1),e._v(" "),t("div",[t("el-pagination",{ref:"bottomPagination",staticClass:"el_pagination_class",attrs:{background:"",layout:"prev, pager, next","current-page":e.pageIndex,"page-size":20,total:e.pageTotal},on:{"current-change":e.changePageHandle,"update:currentPage":function(a){e.pageIndex=a}}})],1),e._v(" "),t("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],ref:"dialog_wrapper",staticClass:"dialog-container",attrs:{title:"查看会员卡","modal-append-to-body":!1,visible:e.dialogVisible,width:e.dialogWidth,"close-on-click-modal":!1},on:{"update:visible":function(a){e.dialogVisible=a}}},[t("div",{attrs:{slot:"title"},slot:"title"},[t("p",{staticStyle:{color:"#37bfc8"}},[e._v("查看会员卡")])]),e._v(" "),t("div",{staticClass:"dialog-body"},[t("secMenbCardInfo",{ref:"secMenbCardInfoRef",attrs:{id:e.id},on:{close:e.closeMenInfoDialog}}),e._v(" "),t("div",{directives:[{name:"dialogDragWidth",rawName:"v-dialogDragWidth",value:e.$refs.dialog_wrapper,expression:"$refs.dialog_wrapper"}],staticClass:"line"})],1)]),e._v(" "),t("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],ref:"dialog_wrapper",staticClass:"dialog-container",attrs:{title:"修改会员卡",visible:e.dialogVisible1,width:e.dialogWidth,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(a){e.dialogVisible1=a}}},[t("div",{attrs:{slot:"title"},slot:"title"},[t("p",{staticStyle:{color:"#37bfc8"},attrs:{id:e.id}},[e._v("修改会员卡")])]),e._v(" "),t("div",{staticClass:"dialog-body"},[t("secMenbCardModCard",{ref:"secMenbCardModCardRef",attrs:{id:e.id},on:{close:e.closeChangeMenDialog}}),e._v(" "),t("div",{directives:[{name:"dialogDragWidth",rawName:"v-dialogDragWidth",value:e.$refs.dialog_wrapper,expression:"$refs.dialog_wrapper"}],staticClass:"line"})],1)]),e._v(" "),t("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],ref:"dialog_wrapper",staticClass:"dialog-container",attrs:{title:"添加会员卡",visible:e.dialogVisible2,width:e.dialogWidth,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(a){e.dialogVisible2=a}}},[t("div",{attrs:{slot:"title"},slot:"title"},[t("p",{staticStyle:{color:"#37bfc8"}},[e._v("添加会员卡")])]),e._v(" "),t("div",{staticClass:"dialog-body"},[t("secMenbCardAddCard",{ref:"secMenbCardAddCardRef",on:{close:e.closeAddMenDialog}}),e._v(" "),t("div",{directives:[{name:"dialogDragWidth",rawName:"v-dialogDragWidth",value:e.$refs.dialog_wrapper,expression:"$refs.dialog_wrapper"}],staticClass:"line"})],1)])],1):t("div",[t("img",{staticClass:"title-image",attrs:{src:e.tranlatePath("static/img/noPermission.png"),width:"100%"}})])])},staticRenderFns:[]};var p=t("VU/8")(r,c,!1,function(e){t("2S6r")},"data-v-2389ab2a",null);a.default=p.exports},Xf15:function(e,a){},cP7m:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={data:function(){return{canAddUp:!1,shopsUseData:[],checkUseShop:[],shopsSendData:[],checkSendShop:[],para:{ID:0,GroupID:0,Title:"",SavePrice:"",SalePrice:"",IsScore:!1,IsAllowPay:!1,ActiveMonth:"",AddDate:"",AdminID:0,AdminCode:0,Discount:"",IsClose:!1,SaleComm:"",SaleCommType:0,FillComm:"",FillCommType:0,UCardFillScore:"",UCardPayScore:"",sendShopIDs:"",useShopIDs:"",CanUseShops:"",CanSendShops:""},SaleCommTypes:[{label:"--请选择--",SaleCommType:0},{label:"卡储金额",SaleCommType:1},{label:"售卡金额",SaleCommType:2},{label:"按张提成",SaleCommType:3}],FillCommTypes:[{label:"--请选择--",FillCommType:0},{label:"充赠金额",FillCommType:1},{label:"充值金额",FillCommType:2}],SaleCommUnit:"%",SaleCommDisable:!0,FillCommDisable:!0}},created:function(){this.update()},methods:{update:function(){this.para={ID:0,GroupID:0,Title:"",SavePrice:"",SalePrice:"",IsScore:!1,IsAllowPay:!1,ActiveMonth:"",AddDate:"",AdminID:0,AdminCode:0,Discount:"",IsClose:!1,SaleComm:"",SaleCommType:0,FillComm:"",FillCommType:0,UCardFillScore:"",UCardPayScore:"",sendShopIDs:"",useShopIDs:"",CanUseShops:"",CanSendShops:""},this.getshops()},clickSave:function(){var e=this;this.dataValidation()&&this.$store.dispatch("queryAddUCardInfo",this.para).then(function(a){e.$message({type:"success",message:"添加成功"}),e.$emit("close")}).catch(function(){})},clickCancel:function(){this.$emit("close")},SaleCommTypeChange:function(e){switch(e){case 0:this.para.SaleComm="",this.SaleCommUnit="%",this.SaleCommDisable=!0;break;case 1:case 2:this.para.SaleComm=0,this.SaleCommUnit="%",this.SaleCommDisable=!1;break;case 3:this.para.SaleComm=0,this.SaleCommUnit="元/张",this.SaleCommDisable=!1}},FillCommTypeChange:function(e){switch(e){case 0:this.para.FillComm="",this.FillCommDisable=!0;break;case 1:case 2:this.para.FillComm=0,this.FillCommDisable=!1}},dataValidation:function(){return""===this.para.Title.trim()?(this.$message.error("请输入会员卡名称"),!1):""===this.para.Discount?(this.$message.error("请输入消费折扣"),!1):!this.isPositiveInteger(this.para.Discount)||this.para.Discount>100||this.para.Discount<=0?(this.$message.error("消费折扣只能输入1-100之间的正整数"),!1):""===this.para.SavePrice?(this.$message.error("请输入初始储值"),!1):isNaN(this.para.SavePrice)||this.para.SavePrice<0?(this.$message.error("初始储值只能输入正数，最多保留两位小数"),!1):""===this.para.SalePrice?(this.$message.error("请输入售卡金额"),!1):isNaN(this.para.SalePrice)||this.para.SalePrice<0?(this.$message.error("售卡金额只能输入正数，最多保留两位小数"),!1):this.para.SalePrice>this.para.SavePrice?(this.$message.error("售卡金额不得大于初始储值"),!1):""===this.para.ActiveMonth?(this.$message.error("请输入会员卡有效期"),!1):this.isPositiveInteger(this.para.ActiveMonth)?this.para.IsScore&&""===this.para.UCardPayScore&&""===this.para.UCardFillScore?(this.$message.error("充值和消费金额不能同时为空"),!1):this.para.IsScore&&!this.isPositiveInteger(this.para.UCardPayScore)&&""!==this.para.UCardPayScore?(this.$message.error("积分规则必须为大于0的整数"),!1):this.para.IsScore&&!this.isPositiveInteger(this.para.UCardFillScore)&&""!==this.para.UCardFillScore?(this.$message.error("积分规则必须为大于0的整数"),!1):0!==this.para.FillCommType&&(this.para.FillComm<=0||this.para.FillComm>100||!this.isPositiveInteger(this.para.FillComm))?(this.$message.error("提成数请输入1-100的正整数"),!1):!(0!==this.para.SaleCommType&&(this.para.SaleComm>100||!this.isPositiveInteger(this.para.SaleComm)))||(this.$message.error("提成数请输入1-100的正整数"),!1):(this.$message.error("会员卡有效期只能输入正整数"),!1)},isPositiveInteger:function(e){return/^[0-9]+$/.test(e)},getshops:function(){var e=this;this.$store.dispatch("queryBindShops",{shopid:0}).then(function(a){e.shopsUseData=[],a.shopsUseL.forEach(function(a){var t={};t.key=a.ID,t.label=a.Title,e.shopsUseData.push(t)}),e.shopsSendData=[],a.shopsSendL.forEach(function(a){var t={};t.key=a.ID,t.label=a.Title,e.shopsSendData.push(t)})}).catch(function(){})},useShopChange:function(){for(var e=[],a=0;a<this.checkUseShop.length;a++)this.checkUseShop.length-1!==a?e.push(this.checkUseShop[a]+","):e.push(this.checkUseShop[a]);this.para.sendShopIDs=e.join("")},sendShopChange:function(){for(var e=[],a=0;a<this.checkSendShop.length;a++)this.checkSendShop.length-1!==a?e.push(this.checkUseShop[a]+","):e.push(this.checkUseShop[a]);this.para.useShopIDs=e.join("")}}},i={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",[t("p",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoShowName"},[e._v("会员卡名称：")]),e._v(" "),t("el-input",{staticClass:"el-input",attrs:{placeholder:"请输入会员卡名称",type:"text",autoComplete:"off"},model:{value:e.para.Title,callback:function(a){e.$set(e.para,"Title",a)},expression:"para.Title"}}),e._v(" "),t("span",{staticStyle:{color:"#e33c32"}},[e._v("*")])],1),e._v(" "),t("p",{staticClass:"infoPerLine1 position"},[t("span",{staticClass:"infoShowName"},[e._v("消费折扣：")]),e._v(" "),t("el-input",{staticClass:"el-input",attrs:{placeholder:"请输入折扣",type:"text",autoComplete:"off"},model:{value:e.para.Discount,callback:function(a){e.$set(e.para,"Discount",a)},expression:"para.Discount"}}),e._v(" "),t("em",{staticStyle:{position:"absolute",top:"10px",left:"340px"}},[e._v("%")]),e._v(" "),t("span",{staticStyle:{color:"#e33c32"}},[e._v("*")])],1),e._v(" "),t("div",{staticClass:"infoPerLine1 position"},[t("span",{staticClass:"infoShowName"},[e._v("初始储值：")]),e._v(" "),t("el-input",{staticClass:"el-input",attrs:{placeholder:"请输入金额",type:"text",autoComplete:"off"},model:{value:e.para.SavePrice,callback:function(a){e.$set(e.para,"SavePrice",a)},expression:"para.SavePrice"}}),e._v(" "),t("span",{staticStyle:{color:"#e33c32"}},[e._v("*")]),e._v(" "),t("em",{staticStyle:{position:"absolute",top:"10px",left:"340px"}},[e._v("元")])],1),e._v(" "),t("p",{staticClass:"infoPerLine1 position"},[t("span",{staticClass:"infoShowName"},[e._v("售卡金额：")]),e._v(" "),t("el-input",{staticClass:"el-input",attrs:{placeholder:"请输入售卡金额",type:"text",autoComplete:"off"},model:{value:e.para.SalePrice,callback:function(a){e.$set(e.para,"SalePrice",a)},expression:"para.SalePrice"}}),e._v(" "),t("span",{staticStyle:{color:"#e33c32"}},[e._v("*")]),e._v(" "),t("em",{staticStyle:{position:"absolute",top:"10px",left:"340px"}},[e._v("元")])],1),e._v(" "),t("p",{staticClass:"infoPerLine1 position"},[t("span",{staticClass:"infoShowName"},[e._v("会员卡有效期：")]),e._v(" "),t("el-input",{staticClass:"el-input",attrs:{placeholder:"请输入有效期",type:"text",autoComplete:"off"},model:{value:e.para.ActiveMonth,callback:function(a){e.$set(e.para,"ActiveMonth",a)},expression:"para.ActiveMonth"}}),e._v(" "),t("span",{staticStyle:{color:"#e33c32"}},[e._v("*")]),e._v(" "),t("em",{staticStyle:{position:"absolute",top:"10px",left:"340px"}},[e._v("月")])],1),e._v(" "),t("p",{staticClass:"infoPerLine1",staticStyle:{position:"relative",display:"inline-block"}},[t("span",{staticClass:"infoShowName"},[e._v("开卡提成类型：")]),e._v(" "),t("el-select",{staticClass:"statu_select",attrs:{placeholder:"请选择"},on:{change:e.SaleCommTypeChange},model:{value:e.para.SaleCommType,callback:function(a){e.$set(e.para,"SaleCommType",a)},expression:"para.SaleCommType"}},e._l(e.SaleCommTypes,function(e){return t("el-option",{key:e.SaleCommType,attrs:{label:e.label,value:e.SaleCommType}})})),e._v(" "),t("span",{staticClass:"infoShowName"},[e._v("提成数：")]),e._v(" "),t("el-input",{staticClass:"el-input",attrs:{disabled:e.SaleCommDisable,type:"text",placeholder:"请输入提成数",autoComplete:"off"},model:{value:e.para.SaleComm,callback:function(a){e.$set(e.para,"SaleComm",a)},expression:"para.SaleComm"}}),e._v(" "),t("em",{staticStyle:{position:"absolute",top:"10px",left:"740px"}},[e._v(e._s(e.SaleCommUnit))])],1),e._v(" "),t("p",{staticClass:"infoPerLine1",staticStyle:{position:"relative",display:"inline-block"}},[t("span",{staticClass:"infoShowName",attrs:{placeholder:"请输入提成数"}},[e._v("充值提成类型：")]),e._v(" "),t("el-select",{staticClass:"statu_select",attrs:{placeholder:"请选择"},on:{change:e.FillCommTypeChange},model:{value:e.para.FillCommType,callback:function(a){e.$set(e.para,"FillCommType",a)},expression:"para.FillCommType"}},e._l(e.FillCommTypes,function(e){return t("el-option",{key:e.FillCommType,attrs:{label:e.label,value:e.FillCommType}})})),e._v(" "),t("span",{staticClass:"infoShowName"},[e._v("提成数：")]),e._v(" "),t("el-input",{staticClass:"el-input",attrs:{disabled:e.FillCommDisable,placeholder:"请输入提成数",type:"text",autoComplete:"off"},model:{value:e.para.FillComm,callback:function(a){e.$set(e.para,"FillComm",a)},expression:"para.FillComm"}}),e._v(" "),t("em",{staticStyle:{position:"absolute",top:"10px",left:"740px"}},[e._v("%")])],1),e._v(" "),t("p",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoShowName"},[e._v("状态：")]),e._v(" "),t("el-radio-group",{model:{value:e.para.IsClose,callback:function(a){e.$set(e.para,"IsClose",a)},expression:"para.IsClose"}},[t("el-radio",{attrs:{label:!1}},[e._v("启用")]),e._v(" "),t("el-radio",{attrs:{label:!0}},[e._v("禁用")])],1)],1),e._v(" "),t("p",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoShowName"}),e._v(" "),t("el-checkbox",{model:{value:e.para.IsAllowPay,callback:function(a){e.$set(e.para,"IsAllowPay",a)},expression:"para.IsAllowPay"}},[e._v("可充值 ")]),e._v(" "),t("el-checkbox",{model:{value:e.para.IsScore,callback:function(a){e.$set(e.para,"IsScore",a)},expression:"para.IsScore"}},[e._v("可积分")])],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.para.IsScore,expression:"para.IsScore"}]},[t("p",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoShowName"},[e._v("积分规则：")]),e._v("\n        充值\n        "),t("el-input",{staticClass:"el-input",attrs:{type:"text",autoComplete:"off"},model:{value:e.para.UCardFillScore,callback:function(a){e.$set(e.para,"UCardFillScore",a)},expression:"para.UCardFillScore"}}),e._v("\n        元即可获得1积分\n      ")],1),e._v(" "),t("p",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoShowName"}),e._v("\n        消费\n        "),t("el-input",{staticClass:"el-input",attrs:{type:"text",autoComplete:"off"},model:{value:e.para.UCardPayScore,callback:function(a){e.$set(e.para,"UCardPayScore",a)},expression:"para.UCardPayScore"}}),e._v("\n        元即可获得1积分\n      ")],1)]),e._v(" "),t("p",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoShowName"},[e._v("可发卡门店：")]),e._v(" "),t("span",{staticClass:"infoShowName margin"},[e._v("适用门店：")]),e._v(" "),t("el-transfer",{staticStyle:{"margin-left":"187px"},attrs:{titles:["全选","全选"],data:e.shopsUseData},on:{change:e.useShopChange},model:{value:e.checkUseShop,callback:function(a){e.checkUseShop=a},expression:"checkUseShop"}})],1),e._v(" "),t("p",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoShowName"},[e._v("可用卡门店：")]),e._v(" "),t("span",{staticClass:"infoShowName margin"},[e._v("适用门店：")]),e._v(" "),t("el-transfer",{staticStyle:{"margin-left":"187px"},attrs:{titles:["全选","全选"],data:e.shopsSendData},on:{change:e.sendShopChange},model:{value:e.checkSendShop,callback:function(a){e.checkSendShop=a},expression:"checkSendShop"}})],1),e._v(" "),t("el-button",{staticClass:"el_save_btn",on:{click:e.clickSave}},[e._v("确定")]),e._v(" "),t("el-button",{staticClass:"el_cancel_btn",on:{click:e.clickCancel}},[e._v("取消")])],1)])},staticRenderFns:[]};var o=t("VU/8")(s,i,!1,function(e){t("Xf15")},"data-v-40691ad0",null);a.default=o.exports},vGtI:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={props:{id:{default:0}},data:function(){return{loading:!0,canAddUp:!1,shopsUseData:[],checkUseShop:[],shopsSendData:[],checkSendShop:[],para:{ID:"",GroupID:"",Title:"",SavePrice:"",SalePrice:"",IsScore:"",IsAllowPay:"",ActiveMonth:"",AddDate:"",AdminID:"",AdminCode:"",AdminName:"",Discount:"",IsClose:!1,SaleComm:"",SaleCommType:0,FillComm:"",FillCommType:0,OrderNo:"",UCardFillScore:"",UCardPayScore:"",IDStr:"",UCardInfoGroupID:"",useShopIDs:"",sendShopIDs:""},SaleCommTypes:[{label:"--请选择--",SaleCommType:0},{label:"卡储金额",SaleCommType:1},{label:"售卡金额",SaleCommType:2},{label:"按张提成",SaleCommType:3}],FillCommTypes:[{label:"--请选择--",FillCommType:0},{label:"卡储金额",FillCommType:1},{label:"售卡金额",FillCommType:2}],SaleCommUnit:"%",SaleCommDisable:!0,FillCommDisable:!0}},created:function(){this.update()},methods:{update:function(){this.getInfo(),this.getshops()},getInfo:function(){var e=this;this.loading=!0,this.$store.dispatch("queryUCardInfo",{id:this.id}).then(function(a){e.para=a.info,e.checkSelectState(),e.loading=!1}).catch(function(){})},clickSave:function(){var e=this;this.dataValidation()&&(this.setSendShops(),this.setUseShops(),this.loading=!0,this.$store.dispatch("queryChangeUCardInfo",this.para).then(function(a){e.$message({type:"success",message:"修改成功"}),e.$emit("close"),e.loading=!1}).catch(function(){e.loading=!1}))},clickCancel:function(){this.$emit("close")},SaleCommTypeChange:function(e){switch(this.checkSelectState(),e){case 0:this.para.SaleComm="",this.SaleCommUnit="%";break;case 1:case 2:this.para.SaleComm=0,this.SaleCommUnit="%";break;case 3:this.para.SaleComm=0,this.SaleCommUnit="元/张"}},FillCommTypeChange:function(e){switch(this.checkSelectState(),e){case 0:this.para.FillComm="";break;case 1:case 2:this.para.FillComm=0}},dataValidation:function(){return""===this.para.Title.trim()?(this.$message.error("请输入会员卡名称"),!1):""===this.para.Discount?(this.$message.error("请输入消费折扣"),!1):!this.isPositiveInteger(this.para.Discount)||this.para.Discount>100||this.para.Discount<=0?(this.$message.error("消费折扣只能输入1-100之间的正整数"),!1):""===this.para.SavePrice?(this.$message.error("请输入初始储值"),!1):isNaN(this.para.SavePrice)||this.para.SavePrice<0?(this.$message.error("初始储值只能输入正数，最多保留两位小数"),!1):""===this.para.SalePrice?(this.$message.error("请输入售卡金额"),!1):isNaN(this.para.SalePrice)||this.para.SalePrice<0?(this.$message.error("售卡金额只能输入正数，最多保留两位小数"),!1):this.para.SalePrice>this.para.SavePrice?(this.$message.error("售卡金额不得大于初始储值"),!1):""===this.para.ActiveMonth?(this.$message.error("请输入会员卡有效期"),!1):this.isPositiveInteger(this.para.ActiveMonth)?this.para.IsScore&&""===this.para.UCardPayScore&&""===this.para.UCardFillScore?(this.$message.error("充值和消费金额不能同时为空"),!1):this.para.IsScore&&!this.isPositiveInteger(this.para.UCardPayScore)&&""!==this.para.UCardPayScore?(this.$message.error("积分规则必须为大于0的整数"),!1):this.para.IsScore&&!this.isPositiveInteger(this.para.UCardFillScore)&&""!==this.para.UCardFillScore?(this.$message.error("积分规则必须为大于0的整数"),!1):0!==this.para.FillCommType&&(this.para.FillComm<=0||this.para.FillComm>100||!this.isPositiveInteger(this.para.FillComm))?(this.$message.error("提成数请输入1-100的正整数"),!1):!(0!==this.para.SaleCommType&&(this.para.SaleComm>100||!this.isPositiveInteger(this.para.SaleComm)))||(this.$message.error("提成数请输入1-100的正整数"),!1):(this.$message.error("会员卡有效期只能输入正整数"),!1)},isPositiveInteger:function(e){return/^[0-9]+$/.test(e)},getshops:function(){var e=this;this.loading=!0,this.$store.dispatch("queryBindShops",{id:this.id}).then(function(a){e.shopsUseData=[],a.shopsUseL.forEach(function(a){var t={};t.key=a.ID,t.label=a.Title,e.shopsUseData.push(t)}),e.checkUseShop=[],a.shopsUse.forEach(function(a){var t={};t.key=a.ID,t.label=a.Title,e.shopsUseData.push(t),e.checkUseShop.push(t.key)}),e.shopsSendData=[],a.shopsSendL.forEach(function(a){var t={};t.key=a.ID,t.label=a.Title,e.shopsSendData.push(t)}),e.checkSendShop=[],a.shopsSend.forEach(function(a){var t={};t.key=a.ID,t.label=a.Title,e.shopsSendData.push(t),e.checkSendShop.push(t.key)}),e.loading=!1}).catch(function(){})},checkSelectState:function(){0===this.para.SaleCommType?(this.SaleCommDisable=!0,this.para.SaleComm=""):this.SaleCommDisable=!1,0===this.para.FillCommType?(this.FillCommDisable=!0,this.para.FillComm=""):this.FillCommDisable=!1},setSendShops:function(){var e=[];this.checkSendShop.forEach(function(a){e.push(a+",")}),this.para.sendShopIDs=e.join("")},setUseShops:function(){var e=[];this.checkUseShop.forEach(function(a){e.push(a+",")}),this.para.useShopIDs=e.join("")}}},i={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("p",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoShowName"},[e._v("会员卡名称：")]),e._v(" "),t("el-input",{staticClass:"el-input",attrs:{placeholder:"请输入会员卡名称",type:"text",autoComplete:"off"},model:{value:e.para.Title,callback:function(a){e.$set(e.para,"Title",a)},expression:"para.Title"}}),e._v(" "),t("span",{staticStyle:{color:"#e33c32"}},[e._v("*")])],1),e._v(" "),t("p",{staticClass:"infoPerLine1 position"},[t("span",{staticClass:"infoShowName"},[e._v("消费折扣：")]),e._v(" "),t("el-input",{staticClass:"el-input",attrs:{type:"text",placeholder:"请输入折扣",autoComplete:"off"},model:{value:e.para.Discount,callback:function(a){e.$set(e.para,"Discount",a)},expression:"para.Discount"}}),e._v(" "),t("em",{staticStyle:{position:"absolute",top:"10px",left:"340px"}},[e._v("%")]),e._v(" "),t("span",{staticStyle:{color:"#e33c32"}},[e._v("*")])],1),e._v(" "),t("p",{staticClass:"infoPerLine1 position"},[t("span",{staticClass:"infoShowName"},[e._v("初始储值：")]),e._v(" "),t("el-input",{staticClass:"el-input",attrs:{placeholder:"请输入金额",type:"text",autoComplete:"off"},model:{value:e.para.SavePrice,callback:function(a){e.$set(e.para,"SavePrice",a)},expression:"para.SavePrice"}}),e._v(" "),t("span",{staticStyle:{color:"#e33c32"}},[e._v("*")]),e._v(" "),t("em",{staticStyle:{position:"absolute",top:"10px",left:"340px"}},[e._v("元")])],1),e._v(" "),t("p",{staticClass:"infoPerLine1 position"},[t("span",{staticClass:"infoShowName"},[e._v("售卡金额：")]),e._v(" "),t("el-input",{staticClass:"el-input",attrs:{placeholder:"请输入售卡金额",type:"text",autoComplete:"off"},model:{value:e.para.SalePrice,callback:function(a){e.$set(e.para,"SalePrice",a)},expression:"para.SalePrice"}}),e._v(" "),t("em",{staticStyle:{position:"absolute",top:"10px",left:"340px"}},[e._v("元")]),e._v(" "),t("span",{staticStyle:{color:"#e33c32"}},[e._v("*")])],1),e._v(" "),t("p",{staticClass:"infoPerLine1 position"},[t("span",{staticClass:"infoShowName"},[e._v("会员卡有效期：")]),e._v(" "),t("el-input",{staticClass:"el-input",attrs:{placeholder:"请输入有效期",type:"text",autoComplete:"off"},model:{value:e.para.ActiveMonth,callback:function(a){e.$set(e.para,"ActiveMonth",a)},expression:"para.ActiveMonth"}}),e._v(" "),t("em",{staticStyle:{position:"absolute",top:"10px",left:"340px"}},[e._v("月")]),e._v(" "),t("span",{staticStyle:{color:"#e33c32"}},[e._v("*")])],1),e._v(" "),t("p",{staticClass:"infoPerLine1",staticStyle:{position:"relative",display:"inline-block"}},[t("span",{staticClass:"infoShowName"},[e._v("开卡提成类型：")]),e._v(" "),t("el-select",{staticClass:"statu_select",attrs:{placeholder:"请选择"},on:{change:e.SaleCommTypeChange},model:{value:e.para.SaleCommType,callback:function(a){e.$set(e.para,"SaleCommType",a)},expression:"para.SaleCommType"}},e._l(e.SaleCommTypes,function(e){return t("el-option",{key:e.SaleCommType,attrs:{label:e.label,value:e.SaleCommType}})})),e._v(" "),t("span",{staticClass:"infoShowName"},[e._v("提成数：")]),e._v(" "),t("el-input",{staticClass:"el-input",attrs:{disabled:e.SaleCommDisable,type:"text",placeholder:"请输入提成数",autoComplete:"off"},model:{value:e.para.SaleComm,callback:function(a){e.$set(e.para,"SaleComm",a)},expression:"para.SaleComm"}}),e._v(" "),t("em",{staticStyle:{position:"absolute",top:"10px",left:"740px"}},[e._v(e._s(e.SaleCommUnit))])],1),e._v(" "),t("p",{staticClass:"infoPerLine1",staticStyle:{position:"relative",display:"inline-block"}},[t("span",{staticClass:"infoShowName",attrs:{placeholder:"请输入提成数"}},[e._v("充值提成类型：")]),e._v(" "),t("el-select",{staticClass:"statu_select",attrs:{placeholder:"请选择"},on:{change:e.FillCommTypeChange},model:{value:e.para.FillCommType,callback:function(a){e.$set(e.para,"FillCommType",a)},expression:"para.FillCommType"}},e._l(e.FillCommTypes,function(e){return t("el-option",{key:e.FillCommType,attrs:{label:e.label,value:e.FillCommType}})})),e._v(" "),t("span",{staticClass:"infoShowName"},[e._v("提成数：")]),e._v(" "),t("el-input",{staticClass:"el-input",attrs:{disabled:e.FillCommDisable,placeholder:"请输入提成数",type:"text",autoComplete:"off"},model:{value:e.para.FillComm,callback:function(a){e.$set(e.para,"FillComm",a)},expression:"para.FillComm"}}),e._v(" "),t("em",{staticStyle:{position:"absolute",top:"10px",left:"740px"}},[e._v("%")])],1),e._v(" "),t("p",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoShowName"},[e._v("状态：")]),e._v(" "),t("el-radio-group",{model:{value:e.para.IsClose,callback:function(a){e.$set(e.para,"IsClose",a)},expression:"para.IsClose"}},[t("el-radio",{attrs:{label:!1}},[e._v("启用")]),e._v(" "),t("el-radio",{attrs:{label:!0}},[e._v("禁用")])],1)],1),e._v(" "),t("p",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoShowName"}),e._v(" "),t("el-checkbox",{model:{value:e.para.IsAllowPay,callback:function(a){e.$set(e.para,"IsAllowPay",a)},expression:"para.IsAllowPay"}},[e._v("可充值 ")]),e._v(" "),t("el-checkbox",{model:{value:e.para.IsScore,callback:function(a){e.$set(e.para,"IsScore",a)},expression:"para.IsScore"}},[e._v("可积分")])],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.para.IsScore,expression:"para.IsScore"}]},[t("p",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoShowName"},[e._v("积分规则：")]),e._v("\n        充值\n        "),t("el-input",{staticClass:"el-input",attrs:{type:"text",autoComplete:"off"},model:{value:e.para.UCardFillScore,callback:function(a){e.$set(e.para,"UCardFillScore",a)},expression:"para.UCardFillScore"}}),e._v("\n        元即可获得1积分\n      ")],1),e._v(" "),t("p",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoShowName"}),e._v("\n        消费\n        "),t("el-input",{staticClass:"el-input",attrs:{type:"text",autoComplete:"off"},model:{value:e.para.UCardPayScore,callback:function(a){e.$set(e.para,"UCardPayScore",a)},expression:"para.UCardPayScore"}}),e._v("\n        元即可获得1积分\n      ")],1)]),e._v(" "),t("p",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoShowName"},[e._v("可发卡门店：")]),e._v(" "),t("el-transfer",{staticStyle:{"margin-left":"187px"},attrs:{titles:["全选","全选"],data:e.shopsSendData},model:{value:e.checkSendShop,callback:function(a){e.checkSendShop=a},expression:"checkSendShop"}})],1),e._v(" "),t("p",{staticClass:"infoPerLine1"},[t("span",{staticClass:"infoSh owName"},[e._v("可用卡门店：")]),e._v(" "),t("el-transfer",{staticStyle:{"margin-left":"187px"},attrs:{titles:["全选","全选"],data:e.shopsUseData},model:{value:e.checkUseShop,callback:function(a){e.checkUseShop=a},expression:"checkUseShop"}})],1),e._v(" "),t("el-button",{staticClass:"el_save_btn",on:{click:e.clickSave}},[e._v("确定")]),e._v(" "),t("el-button",{staticClass:"el_cancel_btn",on:{click:e.clickCancel}},[e._v("取消")])],1)])},staticRenderFns:[]};var o=t("VU/8")(s,i,!1,function(e){t("A8wg")},"data-v-2e2d34c8",null);a.default=o.exports}});
//# sourceMappingURL=5.bcf1a6e025a78e0cb9ce.js.map